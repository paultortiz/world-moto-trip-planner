"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/routes/elevation/route";
exports.ids = ["app/api/routes/elevation/route"];
exports.modules = {

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Froutes%2Felevation%2Froute&page=%2Fapi%2Froutes%2Felevation%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Froutes%2Felevation%2Froute.ts&appDir=C%3A%5CUsers%5CPaulOrtiz%5Cprojects%5Cworld-moto-trip-planner%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CPaulOrtiz%5Cprojects%5Cworld-moto-trip-planner&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Froutes%2Felevation%2Froute&page=%2Fapi%2Froutes%2Felevation%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Froutes%2Felevation%2Froute.ts&appDir=C%3A%5CUsers%5CPaulOrtiz%5Cprojects%5Cworld-moto-trip-planner%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CPaulOrtiz%5Cprojects%5Cworld-moto-trip-planner&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_PaulOrtiz_projects_world_moto_trip_planner_src_app_api_routes_elevation_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/routes/elevation/route.ts */ \"(rsc)/./src/app/api/routes/elevation/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/routes/elevation/route\",\n        pathname: \"/api/routes/elevation\",\n        filename: \"route\",\n        bundlePath: \"app/api/routes/elevation/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\PaulOrtiz\\\\projects\\\\world-moto-trip-planner\\\\src\\\\app\\\\api\\\\routes\\\\elevation\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_PaulOrtiz_projects_world_moto_trip_planner_src_app_api_routes_elevation_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/routes/elevation/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZyb3V0ZXMlMkZlbGV2YXRpb24lMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRnJvdXRlcyUyRmVsZXZhdGlvbiUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRnJvdXRlcyUyRmVsZXZhdGlvbiUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNQYXVsT3J0aXolNUNwcm9qZWN0cyU1Q3dvcmxkLW1vdG8tdHJpcC1wbGFubmVyJTVDc3JjJTVDYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj1DJTNBJTVDVXNlcnMlNUNQYXVsT3J0aXolNUNwcm9qZWN0cyU1Q3dvcmxkLW1vdG8tdHJpcC1wbGFubmVyJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUNtRDtBQUNoSTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL3dvcmxkLW1vdG8tdHJpcC1wbGFubmVyLz8wMmQ0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIkM6XFxcXFVzZXJzXFxcXFBhdWxPcnRpelxcXFxwcm9qZWN0c1xcXFx3b3JsZC1tb3RvLXRyaXAtcGxhbm5lclxcXFxzcmNcXFxcYXBwXFxcXGFwaVxcXFxyb3V0ZXNcXFxcZWxldmF0aW9uXFxcXHJvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9yb3V0ZXMvZWxldmF0aW9uL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvcm91dGVzL2VsZXZhdGlvblwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvcm91dGVzL2VsZXZhdGlvbi9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIkM6XFxcXFVzZXJzXFxcXFBhdWxPcnRpelxcXFxwcm9qZWN0c1xcXFx3b3JsZC1tb3RvLXRyaXAtcGxhbm5lclxcXFxzcmNcXFxcYXBwXFxcXGFwaVxcXFxyb3V0ZXNcXFxcZWxldmF0aW9uXFxcXHJvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9yb3V0ZXMvZWxldmF0aW9uL3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Froutes%2Felevation%2Froute&page=%2Fapi%2Froutes%2Felevation%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Froutes%2Felevation%2Froute.ts&appDir=C%3A%5CUsers%5CPaulOrtiz%5Cprojects%5Cworld-moto-trip-planner%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CPaulOrtiz%5Cprojects%5Cworld-moto-trip-planner&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/routes/elevation/route.ts":
/*!***********************************************!*\
  !*** ./src/app/api/routes/elevation/route.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_prisma__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/prisma */ \"(rsc)/./src/lib/prisma.ts\");\n/* harmony import */ var _features_map_polyline__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/features/map/polyline */ \"(rsc)/./src/features/map/polyline.ts\");\n\n\n\nconst ELEVATION_URL = \"https://maps.googleapis.com/maps/api/elevation/json\";\nfunction haversineMeters(a, b) {\n    const R = 6371000; // meters\n    const toRad = (deg)=>deg * Math.PI / 180;\n    const dLat = toRad(b.lat - a.lat);\n    const dLng = toRad(b.lng - a.lng);\n    const lat1 = toRad(a.lat);\n    const lat2 = toRad(b.lat);\n    const sinDLat = Math.sin(dLat / 2);\n    const sinDLng = Math.sin(dLng / 2);\n    const h = sinDLat * sinDLat + Math.cos(lat1) * Math.cos(lat2) * sinDLng * sinDLng;\n    const c = 2 * Math.atan2(Math.sqrt(h), Math.sqrt(1 - h));\n    return R * c;\n}\nasync function POST(req) {\n    try {\n        const body = await req.json();\n        const { tripId } = body ?? {};\n        if (!tripId || typeof tripId !== \"string\") {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"tripId is required\"\n            }, {\n                status: 400\n            });\n        }\n        const apiKey = process.env.GOOGLE_MAPS_SERVER_KEY;\n        if (!apiKey) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"GOOGLE_MAPS_SERVER_KEY is not configured\"\n            }, {\n                status: 500\n            });\n        }\n        const trip = await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.trip.findUnique({\n            where: {\n                id: tripId\n            },\n            include: {\n                routeSegments: true\n            }\n        });\n        if (!trip) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Trip not found\"\n            }, {\n                status: 404\n            });\n        }\n        const segmentWithPolyline = trip.routeSegments.find((seg)=>!!seg.polyline);\n        if (!segmentWithPolyline?.polyline) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"No route polyline found for this trip. Recalculate the route first.\"\n            }, {\n                status: 400\n            });\n        }\n        const path = (0,_features_map_polyline__WEBPACK_IMPORTED_MODULE_2__.decodePolyline)(segmentWithPolyline.polyline);\n        if (!path || path.length < 2) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Decoded route path is too short for elevation profile\"\n            }, {\n                status: 400\n            });\n        }\n        // Sample along the polyline to a reasonable number of points for the Elevation API.\n        const MAX_SAMPLES = 128;\n        const step = Math.max(1, Math.floor(path.length / MAX_SAMPLES));\n        const samples = [];\n        for(let i = 0; i < path.length; i += step){\n            samples.push(path[i]);\n        }\n        if (samples[samples.length - 1] !== path[path.length - 1]) {\n            samples.push(path[path.length - 1]);\n        }\n        const locationsParam = samples.map((p)=>`${p.lat},${p.lng}`).join(\"|\");\n        const url = `${ELEVATION_URL}?locations=${encodeURIComponent(locationsParam)}&key=${apiKey}`;\n        const res = await fetch(url);\n        if (!res.ok) {\n            const text = await res.text();\n            console.error(\"Elevation API error\", res.status, text);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Failed to fetch elevation\"\n            }, {\n                status: 502\n            });\n        }\n        const data = await res.json();\n        if (!data.results || data.results.length === 0) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"No elevation data returned\"\n            }, {\n                status: 502\n            });\n        }\n        const elevations = [];\n        let distanceFromStart = 0;\n        let lastPoint = samples[0];\n        for(let i = 0; i < data.results.length; i++){\n            const result = data.results[i];\n            const loc = result.location;\n            const elev = result.elevation;\n            const currentPoint = {\n                lat: loc.lat,\n                lng: loc.lng\n            };\n            if (i > 0) {\n                distanceFromStart += haversineMeters(lastPoint, currentPoint);\n            }\n            elevations.push({\n                distanceMeters: distanceFromStart,\n                elevationMeters: elev\n            });\n            lastPoint = currentPoint;\n        }\n        // Compute ascent, descent, and max elevation.\n        let totalAscent = 0;\n        let totalDescent = 0;\n        let maxElevation = elevations[0]?.elevationMeters ?? 0;\n        for(let i = 0; i < elevations.length - 1; i++){\n            const cur = elevations[i].elevationMeters;\n            const next = elevations[i + 1].elevationMeters;\n            const diff = next - cur;\n            if (diff > 0) totalAscent += diff;\n            if (diff < 0) totalDescent += -diff;\n            if (next > maxElevation) maxElevation = next;\n        }\n        // Persist summary metrics on the trip.\n        await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.trip.update({\n            where: {\n                id: tripId\n            },\n            data: {\n                totalAscentMeters: Math.round(totalAscent),\n                totalDescentMeters: Math.round(totalDescent),\n                maxElevationMeters: Math.round(maxElevation)\n            }\n        });\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            elevationProfile: elevations,\n            totalAscentMeters: Math.round(totalAscent),\n            totalDescentMeters: Math.round(totalDescent),\n            maxElevationMeters: Math.round(maxElevation)\n        });\n    } catch (error) {\n        console.error(\"Error calculating elevation profile\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Failed to calculate elevation profile\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9yb3V0ZXMvZWxldmF0aW9uL3JvdXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBd0Q7QUFDbEI7QUFDbUI7QUFFekQsTUFBTUcsZ0JBQWdCO0FBT3RCLFNBQVNDLGdCQUFnQkMsQ0FBK0IsRUFBRUMsQ0FBK0I7SUFDdkYsTUFBTUMsSUFBSSxTQUFTLFNBQVM7SUFDNUIsTUFBTUMsUUFBUSxDQUFDQyxNQUFnQixNQUFPQyxLQUFLQyxFQUFFLEdBQUk7SUFDakQsTUFBTUMsT0FBT0osTUFBTUYsRUFBRU8sR0FBRyxHQUFHUixFQUFFUSxHQUFHO0lBQ2hDLE1BQU1DLE9BQU9OLE1BQU1GLEVBQUVTLEdBQUcsR0FBR1YsRUFBRVUsR0FBRztJQUNoQyxNQUFNQyxPQUFPUixNQUFNSCxFQUFFUSxHQUFHO0lBQ3hCLE1BQU1JLE9BQU9ULE1BQU1GLEVBQUVPLEdBQUc7SUFFeEIsTUFBTUssVUFBVVIsS0FBS1MsR0FBRyxDQUFDUCxPQUFPO0lBQ2hDLE1BQU1RLFVBQVVWLEtBQUtTLEdBQUcsQ0FBQ0wsT0FBTztJQUNoQyxNQUFNTyxJQUNKSCxVQUFVQSxVQUNWUixLQUFLWSxHQUFHLENBQUNOLFFBQVFOLEtBQUtZLEdBQUcsQ0FBQ0wsUUFBUUcsVUFBVUE7SUFDOUMsTUFBTUcsSUFBSSxJQUFJYixLQUFLYyxLQUFLLENBQUNkLEtBQUtlLElBQUksQ0FBQ0osSUFBSVgsS0FBS2UsSUFBSSxDQUFDLElBQUlKO0lBQ3JELE9BQU9kLElBQUlnQjtBQUNiO0FBRU8sZUFBZUcsS0FBS0MsR0FBZ0I7SUFDekMsSUFBSTtRQUNGLE1BQU1DLE9BQU8sTUFBTUQsSUFBSUUsSUFBSTtRQUMzQixNQUFNLEVBQUVDLE1BQU0sRUFBRSxHQUFHRixRQUFRLENBQUM7UUFFNUIsSUFBSSxDQUFDRSxVQUFVLE9BQU9BLFdBQVcsVUFBVTtZQUN6QyxPQUFPOUIscURBQVlBLENBQUM2QixJQUFJLENBQ3RCO2dCQUFFRSxPQUFPO1lBQXFCLEdBQzlCO2dCQUFF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QU87WUFDcEJxQyxNQUFNO2dCQUNKb0IsbUJBQW1CN0UsS0FBSzhFLEtBQUssQ0FBQ1I7Z0JBQzlCUyxvQkFBb0IvRSxLQUFLOEUsS0FBSyxDQUFDUDtnQkFDL0JTLG9CQUFvQmhGLEtBQUs4RSxLQUFLLENBQUNOO1lBQ2pDO1FBQ0Y7UUFFQSxPQUFPbEYscURBQVlBLENBQUM2QixJQUFJLENBQUM7WUFDdkI4RCxrQkFBa0J0QjtZQUNsQmtCLG1CQUFtQjdFLEtBQUs4RSxLQUFLLENBQUNSO1lBQzlCUyxvQkFBb0IvRSxLQUFLOEUsS0FBSyxDQUFDUDtZQUMvQlMsb0JBQW9CaEYsS0FBSzhFLEtBQUssQ0FBQ047UUFDakM7SUFDRixFQUFFLE9BQU9uRCxPQUFPO1FBQ2RtQyxRQUFRbkMsS0FBSyxDQUFDLHVDQUF1Q0E7UUFDckQsT0FBTy9CLHFEQUFZQSxDQUFDNkIsSUFBSSxDQUN0QjtZQUFFRSxPQUFPO1FBQXdDLEdBQ2pEO1lBQUVDLFFBQVE7UUFBSTtJQUVsQjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd29ybGQtbW90by10cmlwLXBsYW5uZXIvLi9zcmMvYXBwL2FwaS9yb3V0ZXMvZWxldmF0aW9uL3JvdXRlLnRzPzEwMmIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gXCJuZXh0L3NlcnZlclwiO1xyXG5pbXBvcnQgeyBwcmlzbWEgfSBmcm9tIFwiQC9saWIvcHJpc21hXCI7XHJcbmltcG9ydCB7IGRlY29kZVBvbHlsaW5lIH0gZnJvbSBcIkAvZmVhdHVyZXMvbWFwL3BvbHlsaW5lXCI7XHJcblxyXG5jb25zdCBFTEVWQVRJT05fVVJMID0gXCJodHRwczovL21hcHMuZ29vZ2xlYXBpcy5jb20vbWFwcy9hcGkvZWxldmF0aW9uL2pzb25cIjtcclxuXHJcbmludGVyZmFjZSBFbGV2YXRpb25Qb2ludCB7XHJcbiAgZGlzdGFuY2VNZXRlcnM6IG51bWJlcjtcclxuICBlbGV2YXRpb25NZXRlcnM6IG51bWJlcjtcclxufVxyXG5cclxuZnVuY3Rpb24gaGF2ZXJzaW5lTWV0ZXJzKGE6IHsgbGF0OiBudW1iZXI7IGxuZzogbnVtYmVyIH0sIGI6IHsgbGF0OiBudW1iZXI7IGxuZzogbnVtYmVyIH0pOiBudW1iZXIge1xyXG4gIGNvbnN0IFIgPSA2MzcxMDAwOyAvLyBtZXRlcnNcclxuICBjb25zdCB0b1JhZCA9IChkZWc6IG51bWJlcikgPT4gKGRlZyAqIE1hdGguUEkpIC8gMTgwO1xyXG4gIGNvbnN0IGRMYXQgPSB0b1JhZChiLmxhdCAtIGEubGF0KTtcclxuICBjb25zdCBkTG5nID0gdG9SYWQoYi5sbmcgLSBhLmxuZyk7XHJcbiAgY29uc3QgbGF0MSA9IHRvUmFkKGEubGF0KTtcclxuICBjb25zdCBsYXQyID0gdG9SYWQoYi5sYXQpO1xyXG5cclxuICBjb25zdCBzaW5ETGF0ID0gTWF0aC5zaW4oZExhdCAvIDIpO1xyXG4gIGNvbnN0IHNpbkRMbmcgPSBNYXRoLnNpbihkTG5nIC8gMik7XHJcbiAgY29uc3QgaCA9XHJcbiAgICBzaW5ETGF0ICogc2luRExhdCArXHJcbiAgICBNYXRoLmNvcyhsYXQxKSAqIE1hdGguY29zKGxhdDIpICogc2luRExuZyAqIHNpbkRMbmc7XHJcbiAgY29uc3QgYyA9IDIgKiBNYXRoLmF0YW4yKE1hdGguc3FydChoKSwgTWF0aC5zcXJ0KDEgLSBoKSk7XHJcbiAgcmV0dXJuIFIgKiBjO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXE6IE5leHRSZXF1ZXN0KSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IGJvZHkgPSBhd2FpdCByZXEuanNvbigpO1xyXG4gICAgY29uc3QgeyB0cmlwSWQgfSA9IGJvZHkgPz8ge307XHJcblxyXG4gICAgaWYgKCF0cmlwSWQgfHwgdHlwZW9mIHRyaXBJZCAhPT0gXCJzdHJpbmdcIikge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgeyBlcnJvcjogXCJ0cmlwSWQgaXMgcmVxdWlyZWRcIiB9LFxyXG4gICAgICAgIHsgc3RhdHVzOiA0MDAgfSxcclxuICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBhcGlLZXkgPSBwcm9jZXNzLmVudi5HT09HTEVfTUFQU19TRVJWRVJfS0VZO1xyXG4gICAgaWYgKCFhcGlLZXkpIHtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgIHsgZXJyb3I6IFwiR09PR0xFX01BUFNfU0VSVkVSX0tFWSBpcyBub3QgY29uZmlndXJlZFwiIH0sXHJcbiAgICAgICAgeyBzdGF0dXM6IDUwMCB9LFxyXG4gICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHRyaXAgPSBhd2FpdCBwcmlzbWEudHJpcC5maW5kVW5pcXVlKHtcclxuICAgICAgd2hlcmU6IHsgaWQ6IHRyaXBJZCB9LFxyXG4gICAgICBpbmNsdWRlOiB7IHJvdXRlU2VnbWVudHM6IHRydWUgfSxcclxuICAgIH0pO1xyXG5cclxuICAgIGlmICghdHJpcCkge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgeyBlcnJvcjogXCJUcmlwIG5vdCBmb3VuZFwiIH0sXHJcbiAgICAgICAgeyBzdGF0dXM6IDQwNCB9LFxyXG4gICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHNlZ21lbnRXaXRoUG9seWxpbmUgPSB0cmlwLnJvdXRlU2VnbWVudHMuZmluZCgoc2VnKSA9PiAhIXNlZy5wb2x5bGluZSk7XHJcbiAgICBpZiAoIXNlZ21lbnRXaXRoUG9seWxpbmU/LnBvbHlsaW5lKSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICB7IGVycm9yOiBcIk5vIHJvdXRlIHBvbHlsaW5lIGZvdW5kIGZvciB0aGlzIHRyaXAuIFJlY2FsY3VsYXRlIHRoZSByb3V0ZSBmaXJzdC5cIiB9LFxyXG4gICAgICAgIHsgc3RhdHVzOiA0MDAgfSxcclxuICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBwYXRoID0gZGVjb2RlUG9seWxpbmUoc2VnbWVudFdpdGhQb2x5bGluZS5wb2x5bGluZSk7XHJcbiAgICBpZiAoIXBhdGggfHwgcGF0aC5sZW5ndGggPCAyKSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICB7IGVycm9yOiBcIkRlY29kZWQgcm91dGUgcGF0aCBpcyB0b28gc2hvcnQgZm9yIGVsZXZhdGlvbiBwcm9maWxlXCIgfSxcclxuICAgICAgICB7IHN0YXR1czogNDAwIH0sXHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gU2FtcGxlIGFsb25nIHRoZSBwb2x5bGluZSB0byBhIHJlYXNvbmFibGUgbnVtYmVyIG9mIHBvaW50cyBmb3IgdGhlIEVsZXZhdGlvbiBBUEkuXHJcbiAgICBjb25zdCBNQVhfU0FNUExFUyA9IDEyODtcclxuICAgIGNvbnN0IHN0ZXAgPSBNYXRoLm1heCgxLCBNYXRoLmZsb29yKHBhdGgubGVuZ3RoIC8gTUFYX1NBTVBMRVMpKTtcclxuICAgIGNvbnN0IHNhbXBsZXMgPSBbXSBhcyB7IGxhdDogbnVtYmVyOyBsbmc6IG51bWJlciB9W107XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBhdGgubGVuZ3RoOyBpICs9IHN0ZXApIHtcclxuICAgICAgc2FtcGxlcy5wdXNoKHBhdGhbaV0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHNhbXBsZXNbc2FtcGxlcy5sZW5ndGggLSAxXSAhPT0gcGF0aFtwYXRoLmxlbmd0aCAtIDFdKSB7XHJcbiAgICAgIHNhbXBsZXMucHVzaChwYXRoW3BhdGgubGVuZ3RoIC0gMV0pO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGxvY2F0aW9uc1BhcmFtID0gc2FtcGxlc1xyXG4gICAgICAubWFwKChwKSA9PiBgJHtwLmxhdH0sJHtwLmxuZ31gKVxyXG4gICAgICAuam9pbihcInxcIik7XHJcblxyXG4gICAgY29uc3QgdXJsID0gYCR7RUxFVkFUSU9OX1VSTH0/bG9jYXRpb25zPSR7ZW5jb2RlVVJJQ29tcG9uZW50KFxyXG4gICAgICBsb2NhdGlvbnNQYXJhbSxcclxuICAgICl9JmtleT0ke2FwaUtleX1gO1xyXG5cclxuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKHVybCk7XHJcbiAgICBpZiAoIXJlcy5vaykge1xyXG4gICAgICBjb25zdCB0ZXh0ID0gYXdhaXQgcmVzLnRleHQoKTtcclxuICAgICAgY29uc29sZS5lcnJvcihcIkVsZXZhdGlvbiBBUEkgZXJyb3JcIiwgcmVzLnN0YXR1cywgdGV4dCk7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICB7IGVycm9yOiBcIkZhaWxlZCB0byBmZXRjaCBlbGV2YXRpb25cIiB9LFxyXG4gICAgICAgIHsgc3RhdHVzOiA1MDIgfSxcclxuICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzLmpzb24oKTtcclxuICAgIGlmICghZGF0YS5yZXN1bHRzIHx8IGRhdGEucmVzdWx0cy5sZW5ndGggPT09IDApIHtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgIHsgZXJyb3I6IFwiTm8gZWxldmF0aW9uIGRhdGEgcmV0dXJuZWRcIiB9LFxyXG4gICAgICAgIHsgc3RhdHVzOiA1MDIgfSxcclxuICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBlbGV2YXRpb25zOiBFbGV2YXRpb25Qb2ludFtdID0gW107XHJcbiAgICBsZXQgZGlzdGFuY2VGcm9tU3RhcnQgPSAwO1xyXG4gICAgbGV0IGxhc3RQb2ludCA9IHNhbXBsZXNbMF07XHJcblxyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYXRhLnJlc3VsdHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgY29uc3QgcmVzdWx0ID0gZGF0YS5yZXN1bHRzW2ldO1xyXG4gICAgICBjb25zdCBsb2MgPSByZXN1bHQubG9jYXRpb247XHJcbiAgICAgIGNvbnN0IGVsZXYgPSByZXN1bHQuZWxldmF0aW9uIGFzIG51bWJlcjtcclxuICAgICAgY29uc3QgY3VycmVudFBvaW50ID0geyBsYXQ6IGxvYy5sYXQgYXMgbnVtYmVyLCBsbmc6IGxvYy5sbmcgYXMgbnVtYmVyIH07XHJcblxyXG4gICAgICBpZiAoaSA+IDApIHtcclxuICAgICAgICBkaXN0YW5jZUZyb21TdGFydCArPSBoYXZlcnNpbmVNZXRlcnMobGFzdFBvaW50LCBjdXJyZW50UG9pbnQpO1xyXG4gICAgICB9XHJcbiAgICAgIGVsZXZhdGlvbnMucHVzaCh7IGRpc3RhbmNlTWV0ZXJzOiBkaXN0YW5jZUZyb21TdGFydCwgZWxldmF0aW9uTWV0ZXJzOiBlbGV2IH0pO1xyXG4gICAgICBsYXN0UG9pbnQgPSBjdXJyZW50UG9pbnQ7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQ29tcHV0ZSBhc2NlbnQsIGRlc2NlbnQsIGFuZCBtYXggZWxldmF0aW9uLlxyXG4gICAgbGV0IHRvdGFsQXNjZW50ID0gMDtcclxuICAgIGxldCB0b3RhbERlc2NlbnQgPSAwO1xyXG4gICAgbGV0IG1heEVsZXZhdGlvbiA9IGVsZXZhdGlvbnNbMF0/LmVsZXZhdGlvbk1ldGVycyA/PyAwO1xyXG5cclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZWxldmF0aW9ucy5sZW5ndGggLSAxOyBpKyspIHtcclxuICAgICAgY29uc3QgY3VyID0gZWxldmF0aW9uc1tpXS5lbGV2YXRpb25NZXRlcnM7XHJcbiAgICAgIGNvbnN0IG5leHQgPSBlbGV2YXRpb25zW2kgKyAxXS5lbGV2YXRpb25NZXRlcnM7XHJcbiAgICAgIGNvbnN0IGRpZmYgPSBuZXh0IC0gY3VyO1xyXG4gICAgICBpZiAoZGlmZiA+IDApIHRvdGFsQXNjZW50ICs9IGRpZmY7XHJcbiAgICAgIGlmIChkaWZmIDwgMCkgdG90YWxEZXNjZW50ICs9IC1kaWZmO1xyXG4gICAgICBpZiAobmV4dCA+IG1heEVsZXZhdGlvbikgbWF4RWxldmF0aW9uID0gbmV4dDtcclxuICAgIH1cclxuXHJcbiAgICAvLyBQZXJzaXN0IHN1bW1hcnkgbWV0cmljcyBvbiB0aGUgdHJpcC5cclxuICAgIGF3YWl0IHByaXNtYS50cmlwLnVwZGF0ZSh7XHJcbiAgICAgIHdoZXJlOiB7IGlkOiB0cmlwSWQgfSxcclxuICAgICAgZGF0YToge1xyXG4gICAgICAgIHRvdGFsQXNjZW50TWV0ZXJzOiBNYXRoLnJvdW5kKHRvdGFsQXNjZW50KSxcclxuICAgICAgICB0b3RhbERlc2NlbnRNZXRlcnM6IE1hdGgucm91bmQodG90YWxEZXNjZW50KSxcclxuICAgICAgICBtYXhFbGV2YXRpb25NZXRlcnM6IE1hdGgucm91bmQobWF4RWxldmF0aW9uKSxcclxuICAgICAgfSxcclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XHJcbiAgICAgIGVsZXZhdGlvblByb2ZpbGU6IGVsZXZhdGlvbnMsXHJcbiAgICAgIHRvdGFsQXNjZW50TWV0ZXJzOiBNYXRoLnJvdW5kKHRvdGFsQXNjZW50KSxcclxuICAgICAgdG90YWxEZXNjZW50TWV0ZXJzOiBNYXRoLnJvdW5kKHRvdGFsRGVzY2VudCksXHJcbiAgICAgIG1heEVsZXZhdGlvbk1ldGVyczogTWF0aC5yb3VuZChtYXhFbGV2YXRpb24pLFxyXG4gICAgfSk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBjYWxjdWxhdGluZyBlbGV2YXRpb24gcHJvZmlsZVwiLCBlcnJvcik7XHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgIHsgZXJyb3I6IFwiRmFpbGVkIHRvIGNhbGN1bGF0ZSBlbGV2YXRpb24gcHJvZmlsZVwiIH0sXHJcbiAgICAgIHsgc3RhdHVzOiA1MDAgfSxcclxuICAgICk7XHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJwcmlzbWEiLCJkZWNvZGVQb2x5bGluZSIsIkVMRVZBVElPTl9VUkwiLCJoYXZlcnNpbmVNZXRlcnMiLCJhIiwiYiIsIlIiLCJ0b1JhZCIsImRlZyIsIk1hdGgiLCJQSSIsImRMYXQiLCJsYXQiLCJkTG5nIiwibG5nIiwibGF0MSIsImxhdDIiLCJzaW5ETGF0Iiwic2luIiwic2luRExuZyIsImgiLCJjb3MiLCJjIiwiYXRhbjIiLCJzcXJ0IiwiUE9TVCIsInJlcSIsImJvZHkiLCJqc29uIiwidHJpcElkIiwiZXJyb3IiLCJzdGF0dXMiLCJhcGlLZXkiLCJwcm9jZXNzIiwiZW52IiwiR09PR0xFX01BUFNfU0VSVkVSX0tFWSIsInRyaXAiLCJmaW5kVW5pcXVlIiwid2hlcmUiLCJpZCIsImluY2x1ZGUiLCJyb3V0ZVNlZ21lbnRzIiwic2VnbWVudFdpdGhQb2x5bGluZSIsImZpbmQiLCJzZWciLCJwb2x5bGluZSIsInBhdGgiLCJsZW5ndGgiLCJNQVhfU0FNUExFUyIsInN0ZXAiLCJtYXgiLCJmbG9vciIsInNhbXBsZXMiLCJpIiwicHVzaCIsImxvY2F0aW9uc1BhcmFtIiwibWFwIiwicCIsImpvaW4iLCJ1cmwiLCJlbmNvZGVVUklDb21wb25lbnQiLCJyZXMiLCJmZXRjaCIsIm9rIiwidGV4dCIsImNvbnNvbGUiLCJkYXRhIiwicmVzdWx0cyIsImVsZXZhdGlvbnMiLCJkaXN0YW5jZUZyb21TdGFydCIsImxhc3RQb2ludCIsInJlc3VsdCIsImxvYyIsImxvY2F0aW9uIiwiZWxldiIsImVsZXZhdGlvbiIsImN1cnJlbnRQb2ludCIsImRpc3RhbmNlTWV0ZXJzIiwiZWxldmF0aW9uTWV0ZXJzIiwidG90YWxBc2NlbnQiLCJ0b3RhbERlc2NlbnQiLCJtYXhFbGV2YXRpb24iLCJjdXIiLCJuZXh0IiwiZGlmZiIsInVwZGF0ZSIsInRvdGFsQXNjZW50TWV0ZXJzIiwicm91bmQiLCJ0b3RhbERlc2NlbnRNZXRlcnMiLCJtYXhFbGV2YXRpb25NZXRlcnMiLCJlbGV2YXRpb25Qcm9maWxlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/routes/elevation/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/features/map/polyline.ts":
/*!**************************************!*\
  !*** ./src/features/map/polyline.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   decodePolyline: () => (/* binding */ decodePolyline)\n/* harmony export */ });\n// Minimal polyline decoder for Google encoded polylines.\n// Based on Google's Encoded Polyline Algorithm Format.\nfunction decodePolyline(encoded) {\n    let index = 0;\n    const len = encoded.length;\n    const path = [];\n    let lat = 0;\n    let lng = 0;\n    while(index < len){\n        let result = 0;\n        let shift = 0;\n        let b;\n        do {\n            b = encoded.charCodeAt(index++) - 63;\n            result |= (b & 0x1f) << shift;\n            shift += 5;\n        }while (b >= 0x20);\n        const dlat = (result & 1) !== 0 ? ~(result >> 1) : result >> 1;\n        lat += dlat;\n        result = 0;\n        shift = 0;\n        do {\n            b = encoded.charCodeAt(index++) - 63;\n            result |= (b & 0x1f) << shift;\n            shift += 5;\n        }while (b >= 0x20);\n        const dlng = (result & 1) !== 0 ? ~(result >> 1) : result >> 1;\n        lng += dlng;\n        path.push({\n            lat: lat / 1e5,\n            lng: lng / 1e5\n        });\n    }\n    return path;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvZmVhdHVyZXMvbWFwL3BvbHlsaW5lLnRzIiwibWFwcGluZ3MiOiI7Ozs7QUFFQSx5REFBeUQ7QUFDekQsdURBQXVEO0FBQ2hELFNBQVNBLGVBQWVDLE9BQWU7SUFDNUMsSUFBSUMsUUFBUTtJQUNaLE1BQU1DLE1BQU1GLFFBQVFHLE1BQU07SUFDMUIsTUFBTUMsT0FBd0IsRUFBRTtJQUNoQyxJQUFJQyxNQUFNO0lBQ1YsSUFBSUMsTUFBTTtJQUVWLE1BQU9MLFFBQVFDLElBQUs7UUFDbEIsSUFBSUssU0FBUztRQUNiLElBQUlDLFFBQVE7UUFDWixJQUFJQztRQUVKLEdBQUc7WUFDREEsSUFBSVQsUUFBUVUsVUFBVSxDQUFDVCxXQUFXO1lBQ2xDTSxVQUFVLENBQUNFLElBQUksSUFBRyxLQUFNRDtZQUN4QkEsU0FBUztRQUNYLFFBQVNDLEtBQUssTUFBTTtRQUVwQixNQUFNRSxPQUFPLENBQUNKLFNBQVMsT0FBTyxJQUFJLENBQUVBLENBQUFBLFVBQVUsS0FBS0EsVUFBVTtRQUM3REYsT0FBT007UUFFUEosU0FBUztRQUNUQyxRQUFRO1FBRVIsR0FBRztZQUNEQyxJQUFJVCxRQUFRVSxVQUFVLENBQUNULFdBQVc7WUFDbENNLFVBQVUsQ0FBQ0UsSUFBSSxJQUFHLEtBQU1EO1lBQ3hCQSxTQUFTO1FBQ1gsUUFBU0MsS0FBSyxNQUFNO1FBRXBCLE1BQU1HLE9BQU8sQ0FBQ0wsU0FBUyxPQUFPLElBQUksQ0FBRUEsQ0FBQUEsVUFBVSxLQUFLQSxVQUFVO1FBQzdERCxPQUFPTTtRQUVQUixLQUFLUyxJQUFJLENBQUM7WUFBRVIsS0FBS0EsTUFBTTtZQUFLQyxLQUFLQSxNQUFNO1FBQUk7SUFDN0M7SUFFQSxPQUFPRjtBQUNUIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd29ybGQtbW90by10cmlwLXBsYW5uZXIvLi9zcmMvZmVhdHVyZXMvbWFwL3BvbHlsaW5lLnRzPzc5NmYiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IHR5cGUgTGF0TG5nTGl0ZXJhbCA9IHsgbGF0OiBudW1iZXI7IGxuZzogbnVtYmVyIH07XHJcblxyXG4vLyBNaW5pbWFsIHBvbHlsaW5lIGRlY29kZXIgZm9yIEdvb2dsZSBlbmNvZGVkIHBvbHlsaW5lcy5cclxuLy8gQmFzZWQgb24gR29vZ2xlJ3MgRW5jb2RlZCBQb2x5bGluZSBBbGdvcml0aG0gRm9ybWF0LlxyXG5leHBvcnQgZnVuY3Rpb24gZGVjb2RlUG9seWxpbmUoZW5jb2RlZDogc3RyaW5nKTogTGF0TG5nTGl0ZXJhbFtdIHtcclxuICBsZXQgaW5kZXggPSAwO1xyXG4gIGNvbnN0IGxlbiA9IGVuY29kZWQubGVuZ3RoO1xyXG4gIGNvbnN0IHBhdGg6IExhdExuZ0xpdGVyYWxbXSA9IFtdO1xyXG4gIGxldCBsYXQgPSAwO1xyXG4gIGxldCBsbmcgPSAwO1xyXG5cclxuICB3aGlsZSAoaW5kZXggPCBsZW4pIHtcclxuICAgIGxldCByZXN1bHQgPSAwO1xyXG4gICAgbGV0IHNoaWZ0ID0gMDtcclxuICAgIGxldCBiOiBudW1iZXI7XHJcblxyXG4gICAgZG8ge1xyXG4gICAgICBiID0gZW5jb2RlZC5jaGFyQ29kZUF0KGluZGV4KyspIC0gNjM7XHJcbiAgICAgIHJlc3VsdCB8PSAoYiAmIDB4MWYpIDw8IHNoaWZ0O1xyXG4gICAgICBzaGlmdCArPSA1O1xyXG4gICAgfSB3aGlsZSAoYiA+PSAweDIwKTtcclxuXHJcbiAgICBjb25zdCBkbGF0ID0gKHJlc3VsdCAmIDEpICE9PSAwID8gfihyZXN1bHQgPj4gMSkgOiByZXN1bHQgPj4gMTtcclxuICAgIGxhdCArPSBkbGF0O1xyXG5cclxuICAgIHJlc3VsdCA9IDA7XHJcbiAgICBzaGlmdCA9IDA7XHJcblxyXG4gICAgZG8ge1xyXG4gICAgICBiID0gZW5jb2RlZC5jaGFyQ29kZUF0KGluZGV4KyspIC0gNjM7XHJcbiAgICAgIHJlc3VsdCB8PSAoYiAmIDB4MWYpIDw8IHNoaWZ0O1xyXG4gICAgICBzaGlmdCArPSA1O1xyXG4gICAgfSB3aGlsZSAoYiA+PSAweDIwKTtcclxuXHJcbiAgICBjb25zdCBkbG5nID0gKHJlc3VsdCAmIDEpICE9PSAwID8gfihyZXN1bHQgPj4gMSkgOiByZXN1bHQgPj4gMTtcclxuICAgIGxuZyArPSBkbG5nO1xyXG5cclxuICAgIHBhdGgucHVzaCh7IGxhdDogbGF0IC8gMWU1LCBsbmc6IGxuZyAvIDFlNSB9KTtcclxuICB9XHJcblxyXG4gIHJldHVybiBwYXRoO1xyXG59XHJcbiJdLCJuYW1lcyI6WyJkZWNvZGVQb2x5bGluZSIsImVuY29kZWQiLCJpbmRleCIsImxlbiIsImxlbmd0aCIsInBhdGgiLCJsYXQiLCJsbmciLCJyZXN1bHQiLCJzaGlmdCIsImIiLCJjaGFyQ29kZUF0IiwiZGxhdCIsImRsbmciLCJwdXNoIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/features/map/polyline.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/prisma.ts":
/*!***************************!*\
  !*** ./src/lib/prisma.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   prisma: () => (/* binding */ prisma)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n\n// Prevent creating multiple PrismaClient instances in development\nconst globalForPrisma = globalThis;\nconst prisma = globalForPrisma.prisma ?? new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient({\n    log: [\n        \"error\",\n        \"warn\"\n    ]\n});\nif (true) {\n    globalForPrisma.prisma = prisma;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3ByaXNtYS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBOEM7QUFFOUMsa0VBQWtFO0FBQ2xFLE1BQU1DLGtCQUFrQkM7QUFJakIsTUFBTUMsU0FDWEYsZ0JBQWdCRSxNQUFNLElBQ3RCLElBQUlILHdEQUFZQSxDQUFDO0lBQ2ZJLEtBQUs7UUFBQztRQUFTO0tBQU87QUFDeEIsR0FBRztBQUVMLElBQUlDLElBQXFDLEVBQUU7SUFDekNKLGdCQUFnQkUsTUFBTSxHQUFHQTtBQUMzQiIsInNvdXJjZXMiOlsid2VicGFjazovL3dvcmxkLW1vdG8tdHJpcC1wbGFubmVyLy4vc3JjL2xpYi9wcmlzbWEudHM/MDFkNyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQcmlzbWFDbGllbnQgfSBmcm9tIFwiQHByaXNtYS9jbGllbnRcIjtcclxuXHJcbi8vIFByZXZlbnQgY3JlYXRpbmcgbXVsdGlwbGUgUHJpc21hQ2xpZW50IGluc3RhbmNlcyBpbiBkZXZlbG9wbWVudFxyXG5jb25zdCBnbG9iYWxGb3JQcmlzbWEgPSBnbG9iYWxUaGlzIGFzIHVua25vd24gYXMge1xyXG4gIHByaXNtYT86IFByaXNtYUNsaWVudDtcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBwcmlzbWEgPVxyXG4gIGdsb2JhbEZvclByaXNtYS5wcmlzbWEgPz9cclxuICBuZXcgUHJpc21hQ2xpZW50KHtcclxuICAgIGxvZzogW1wiZXJyb3JcIiwgXCJ3YXJuXCJdLFxyXG4gIH0pO1xyXG5cclxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikge1xyXG4gIGdsb2JhbEZvclByaXNtYS5wcmlzbWEgPSBwcmlzbWE7XHJcbn1cclxuIl0sIm5hbWVzIjpbIlByaXNtYUNsaWVudCIsImdsb2JhbEZvclByaXNtYSIsImdsb2JhbFRoaXMiLCJwcmlzbWEiLCJsb2ciLCJwcm9jZXNzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/prisma.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Froutes%2Felevation%2Froute&page=%2Fapi%2Froutes%2Felevation%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Froutes%2Felevation%2Froute.ts&appDir=C%3A%5CUsers%5CPaulOrtiz%5Cprojects%5Cworld-moto-trip-planner%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CPaulOrtiz%5Cprojects%5Cworld-moto-trip-planner&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();